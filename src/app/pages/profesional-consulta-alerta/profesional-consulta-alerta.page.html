<!-- profesional-consulta-alerta.page.html -->
<ion-content class="ion-padding" [ngStyle]="{ 'position': 'relative', '--background': '#E0F7FA' }">

  <ion-grid>
    <ion-row class="ion-padding">
      <ion-col class="ion-padding ion-text-start ion-align-self-center">
        <ion-img *ngIf="usuario?.photoURL" [src]="usuario.photoURL" class="user-image"></ion-img>
      </ion-col>
      <ion-col class="ion-padding ion-text-center ion-align-self-center bell-column">
        <div class="notification-container" (click)="goToHistoriaPacientes()">
          <svg class="bell-icon" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 512 512">
            <path d="M440.08 341.31c-1.66-2-3.29-4-4.89-5.93-22-26.61-35.31-42.67-35.31-118 0-39-9.33-71-27.72-95-13.56-17.73-31.89-31.18-56.05-41.12a3 3 0 01-.82-.67C306.6 51.49 282.82 32 256 32s-50.59 19.49-59.28 48.56a3.13 3.13 0 01-.81.65c-56.38 23.21-83.78 67.74-83.78 136.14 0 75.36-13.29 91.42-35.31 118-1.6 1.93-3.23 3.89-4.89 5.93a35.16 35.16 0 00-4.65 37.62c6.17 13 19.32 21.07 34.33 21.07H410.5c14.94 0 28-8.06 34.19-21a35.17 35.17 0 00-4.61-37.66zM256 480a80.06 80.06 0 0070.44-42.13 4 4 0 00-3.54-5.87H189.12a4 4 0 00-3.55 5.87A80.06 80.06 0 00256 480z" />
          </svg>
          <span *ngIf="numeroConsultas > 0" class="notification-indicator">{{ numeroConsultas }}</span>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Mostrar el contenido solo si hay una consulta seleccionada -->
  <ion-grid *ngIf="consulta" class="ion-no-padding ion-no-margin" [ngStyle]="{
    'background-color': 'rgba(217, 217, 217, 0.6)',
    'overflow': 'hidden',
    'border-radius': '6px',
    'box-shadow': 'rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px'
  }">
    <ion-row class="ion-align-items-center">
      <ion-col class="ion-padding ion-text-right ion-align-self-center">
        <ion-img [ngStyle]="{
          'max-width': '150px',
          'max-height': '150px',
          'border-radius': '50%',
          'overflow': 'hidden',
          'display': 'inline-block'
        }" [src]="consulta?.fotoUsuario || 'assets/images/doctor.png'"></ion-img>
      </ion-col>
      <ion-col class="ion-padding ion-text-left ion-align-self-center">
        <ion-title class="ion-no-padding ion-text-left">{{ consulta?.nombreUsuario }} {{ consulta?.apellidoUsuario }}</ion-title>
        <p class="ion-no-padding ion-text-left">{{ consulta?.rutUsuario }}</p>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="ion-no-padding ion-margin-top ion-text-center">
        <ion-title>Detalles de la solicitud</ion-title>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="ion-padding ion-margin ion-text-center" [ngStyle]="{ 'background-color': 'white', 'border-radius': '6px' }">
        <ion-text>{{ consulta?.descripcion || 'Descripci√≥n no disponible para esta consulta' }}</ion-text>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col class="ion-padding ion-text-center ion-align-self-center">
        <ion-button shape="round" (click)="aceptarOferta()" [ngStyle]="{ '--background': '#4BAADD' }">Aceptar oferta</ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- El mapa se muestra siempre -->
  <ion-row>
    <ion-col>
      <div id="map" style="width: 100%; height: 600px;"></div>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col class="ion-padding ion-text-center ion-align-self-center">
      <ion-button shape="round" (click)="cancelarRuta()" [ngStyle]="{ '--background': '#FF4B4B' }">Cancelar Ruta</ion-button>
    </ion-col>
  </ion-row>
  

</ion-content>

<app-tab></app-tab>
